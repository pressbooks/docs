<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Book Themes | Pressbooks Documentation</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/svg+xml" href="/icon.svg">
    <meta name="description" content="User and Developer Documentation">
    
    <link rel="preload" href="/assets/css/0.styles.b8531dc7.css" as="style"><link rel="preload" href="/assets/js/app.05922f2d.js" as="script"><link rel="preload" href="/assets/js/2.6bc8cb11.js" as="script"><link rel="preload" href="/assets/js/7.1fe1ee85.js" as="script"><link rel="prefetch" href="/assets/js/10.4a91acba.js"><link rel="prefetch" href="/assets/js/11.b3821d89.js"><link rel="prefetch" href="/assets/js/12.bebb1d4a.js"><link rel="prefetch" href="/assets/js/13.df0f8169.js"><link rel="prefetch" href="/assets/js/14.b626ca75.js"><link rel="prefetch" href="/assets/js/15.8a07722a.js"><link rel="prefetch" href="/assets/js/16.10fe115f.js"><link rel="prefetch" href="/assets/js/17.d9b03982.js"><link rel="prefetch" href="/assets/js/18.13fa5301.js"><link rel="prefetch" href="/assets/js/19.5b04bcec.js"><link rel="prefetch" href="/assets/js/20.6fb614b7.js"><link rel="prefetch" href="/assets/js/21.6b8b31ab.js"><link rel="prefetch" href="/assets/js/22.2da197b5.js"><link rel="prefetch" href="/assets/js/23.37acd995.js"><link rel="prefetch" href="/assets/js/24.a6817149.js"><link rel="prefetch" href="/assets/js/25.0e72f4f9.js"><link rel="prefetch" href="/assets/js/26.ddf81e5b.js"><link rel="prefetch" href="/assets/js/3.557dccde.js"><link rel="prefetch" href="/assets/js/4.e05c873c.js"><link rel="prefetch" href="/assets/js/5.f3e6ed41.js"><link rel="prefetch" href="/assets/js/6.498ab014.js"><link rel="prefetch" href="/assets/js/8.32271d86.js"><link rel="prefetch" href="/assets/js/9.a7b039b3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b8531dc7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Pressbooks Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="User Guides" class="dropdown-title"><span class="title">User Guides</span> <span class="arrow down"></span></button> <button type="button" aria-label="User Guides" class="mobile-dropdown-title"><span class="title">User Guides</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/installation/" class="nav-link">
  Installation
</a></li><li class="dropdown-item"><!----> <a href="/integrations/" class="nav-link">
  Integrations
</a></li><li class="dropdown-item"><!----> <a href="/debugging/" class="nav-link">
  Debugging
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Developer Guides" class="dropdown-title"><span class="title">Developer Guides</span> <span class="arrow down"></span></button> <button type="button" aria-label="Developer Guides" class="mobile-dropdown-title"><span class="title">Developer Guides</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/coding-standards/" class="nav-link">
  Coding Standards
</a></li><li class="dropdown-item"><!----> <a href="/local-development/" class="nav-link">
  Local Development
</a></li><li class="dropdown-item"><!----> <a href="/workflow/" class="nav-link">
  Workflow
</a></li><li class="dropdown-item"><!----> <a href="/theme-development/" class="nav-link">
  Theme Development
</a></li><li class="dropdown-item"><!----> <a href="/unit-testing/" class="nav-link">
  Unit Testing
</a></li></ul></div></div><div class="nav-item"><a href="/rest-api/" class="nav-link">
  REST API
</a></div><div class="nav-item"><a href="/changelogs/" class="nav-link">
  Changelogs
</a></div><div class="nav-item"><a href="/contributors/" class="nav-link">
  Contributors
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="User Guides" class="dropdown-title"><span class="title">User Guides</span> <span class="arrow down"></span></button> <button type="button" aria-label="User Guides" class="mobile-dropdown-title"><span class="title">User Guides</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/installation/" class="nav-link">
  Installation
</a></li><li class="dropdown-item"><!----> <a href="/integrations/" class="nav-link">
  Integrations
</a></li><li class="dropdown-item"><!----> <a href="/debugging/" class="nav-link">
  Debugging
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Developer Guides" class="dropdown-title"><span class="title">Developer Guides</span> <span class="arrow down"></span></button> <button type="button" aria-label="Developer Guides" class="mobile-dropdown-title"><span class="title">Developer Guides</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/coding-standards/" class="nav-link">
  Coding Standards
</a></li><li class="dropdown-item"><!----> <a href="/local-development/" class="nav-link">
  Local Development
</a></li><li class="dropdown-item"><!----> <a href="/workflow/" class="nav-link">
  Workflow
</a></li><li class="dropdown-item"><!----> <a href="/theme-development/" class="nav-link">
  Theme Development
</a></li><li class="dropdown-item"><!----> <a href="/unit-testing/" class="nav-link">
  Unit Testing
</a></li></ul></div></div><div class="nav-item"><a href="/rest-api/" class="nav-link">
  REST API
</a></div><div class="nav-item"><a href="/changelogs/" class="nav-link">
  Changelogs
</a></div><div class="nav-item"><a href="/contributors/" class="nav-link">
  Contributors
</a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><p><em><strong>NOTE:</strong> These theme docs are deprecated! New docs coming soon.</em></p> <p>In addition to being WordPress compatible, a book theme must have the following directories and files. These files are used by our PDF &amp; EPUB export modules. The files can be empty (<code>script.js</code>, for example), but must exist. We use the SCSS variant of <a href="http://sass-lang.com" target="_blank" rel="noopener noreferrer">SASS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for our stylesheets, which allows us dynamically modify font stacks and other variables based on user preferences.</p> <div class="language- extra-class"><pre><code>├── _fonts-epub.scss
├── _fonts-prince.scss
├── _fonts-web.scss
├── export
│   ├── epub
│   │   ├── images
│   │   │   └── *
│   │   └── style.scss
│   └── prince
│       ├── images
│       │   └── *
│       ├── script.js
│       └── style.scss
├── style.scss
</code></pre></div><h2 id="fonts"><a href="#fonts" class="header-anchor">#</a> Fonts</h2> <p><code>_fonts-epub.scss</code>, <code>_fonts-prince.scss</code>, <code>_fonts-web.scss</code> are SCSS font stack definitions for EPUB, PDF and WEB. Example code in <code>_fonts-prince.scss</code>:</p> <pre>@import '_font-stack-prince'; // Dynamically generated

$serif-prince: serif !default;
$sans-serif-prince: sans-serif !default;

$font-1: &quot;Tinos&quot;, Georgia, $serif-prince;
$font-2: 'Lato', Helvetica, Arial, $sans-serif-prince;

@import 'LatoFont', 'TinosFont';
</pre> <p>Most themes have at least two font stacks.</p> <p><code>$font-1</code> must be the body font, and <code>$font-2</code> must be the header font. The <code>@import</code> rule loads a SCSS <code>_font-stack-{TYPE}</code> file which is dynamically generated based on the Global Typography theme option. The <code>_font-stack-{TYPE}</code> is built from partials found in <code>./pressbooks/assets/scss/fonts/*.*</code> These files, in combination with the <code>$serif-epub</code>, <code>$sans-serif-epub</code>, <code>$serif-prince</code>, <code>$sans-serif-prince</code>, <code>$serif-web</code> and <code>$sans-serif-web</code> variables, allow us to dynamically add support for non-Latin character sets. Each <code>style.scss</code> file must import the appropriate font stack(s). Example for <code>./export/prince/style.scss</code>:</p> <pre>@import 'fonts-prince';</pre> <p>Font files are located in <code>./themes-book/pressbooks-book/fonts/</code>.</p> <p>The paths for all such fonts in your Custom CSS need to be as follows:</p> <div class="language- extra-class"><pre><code>@font-face {
// ...
src: url(themes-book/pressbooks-book/fonts/YourFont.ttf) format(&quot;truetype&quot;);
}
</code></pre></div><h2 id="pdf-prince-best-practices"><a href="#pdf-prince-best-practices" class="header-anchor">#</a> PDF (Prince) Best Practices</h2> <ol><li>Use CSS and JavaScript as outlined in the <a href="http://www.princexml.com/doc/" target="_blank" rel="noopener noreferrer">Prince user guide<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li></ol> <h2 id="ebook-best-practices"><a href="#ebook-best-practices" class="header-anchor">#</a> Ebook Best Practices</h2> <ol><li><p>CSS must validate as CSS 2.01 with absolutely <strong>no</strong> errors. See:</p> <ul><li><a href="http://jigsaw.w3.org/css-validator/" target="_blank" rel="noopener noreferrer">W3C CSS Validation Service<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://idpf.org/epub/20/spec/OPS_2.0.1_draft.htm#Section3.0" target="_blank" rel="noopener noreferrer">Open Publication Structure (OPS) Style Sheets<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> Why? Adobe Digital Editions (v1.7.2), a licensed technology used by other vendors, will not render CSS with errors.</li></ul></li> <li><p>Avoid nested styles. Why? Some CSS styles which are declared in nested form do not work well with Mobi7.</p></li> <li><p>More Mobi7 superstition. Newer Kindles (KF8) work pretty good! Unfortunately there are no CSS standards for old Kindles (Mobi7). Mobi7 styling is all done inline. The problems you will encounter are when kindlegen converts CSS to inline HTML for backwards compatibility.<code>font-size</code>, <code>font-weight</code>, and <code>font-*</code> on <code>.someclass p</code>, <code>.someclass h5</code>, and <code>.someclass *random*</code> will mess up Mobi7 ouput very badly. You can solve this by making valid CSS 2.1 too complicated for the Mobi7 converter to figure out. For example, defining a CSS selector that only applies to a node that has multi-class CSS inheritance, e.g. <code>.ugc.ugc-chapter h5</code>, or by using the <code>&gt;</code> symbol.This is &quot;throw salt over your shoulder&quot; and &quot;don't walk on sidewalk cracks&quot; advice. The bugs you will encounter with Mobi7 conversion are time consuming and arbitrary. Expect a ton of exports, a ton of trial and error. You can save some time by unpacking MOBI files and looking directly at the Mobi7 HTML with a tool like: <a href="http://www.mobileread.com/forums/showthread.php?t=61986" target="_blank" rel="noopener noreferrer">Mobi Unpack<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></li> <li><p>We test in:</p> <ul><li>Calibre</li> <li>Firefox Epub reader</li> <li>iBooks</li> <li>Adobe Digital Editions 1.7.2</li> <li>Nook Simple Touch</li> <li>Kindle Preview</li> <li>$69 Kindle</li></ul></li></ol> <h2 id="theme-options"><a href="#theme-options" class="header-anchor">#</a> Theme Options</h2> <p>Certain style elements can be overridden by the user under My Books → <strong>YOUR_BOOK</strong> → Appearance → Theme Options. These options are in the book theme, not in the plugin. As a book theme designer you are required to created the following functions in your functions.php file:</p> <ul><li><code>pressbooks_theme_options_display()</code></li> <li><code>pressbooks_theme_options_summary()</code></li></ul> <p>When it comes time to exporting, the following WordPress filters are available:</p> <ul><li><code>pb_pdf_css_override</code></li> <li><code>pb_epub_css_override</code></li> <li><code>pb_pdf_hacks</code></li> <li><code>pb_epub_hacks</code></li></ul> <p>The rule of thumb is that <em>all</em> PDF styling should be done using CSS. In contrast, the HTML piped to the Epub exporter may include HTML hacks to work around bugs found in older Ebook readers. As older hardware is deprecated we expect this situation to improve. Examples:</p> <pre>function pressbooks_theme_pdf_css_override( $css ) {
    return $css; // string
}
add_filter( 'pb_pdf_css_override', 'pressbooks_theme_pdf_css_override' );

function pressbooks_theme_ebook_css_override( $css ) {
  return $css; // string
}
add_filter( 'pb_epub_css_override', 'pressbooks_theme_ebook_css_override' );

function pressbooks_theme_pdf_hacks( $hacks ) {
  return $hacks; // array of options passed back to the export module
}
add_filter( 'pb_pdf_hacks', 'pressbooks_theme_pdf_hacks' );

function pressbooks_theme_ebook_hacks( $hacks ) {
  return $hacks; // array of options passed back to the export module
}
add_filter( 'pb_epub_hacks', 'pressbooks_theme_ebook_hacks' );
</pre> <p>More functions available to book designers. See: pressbooks/functions.php</p> <ul><li><code>pb_get_book_information()</code></li> <li><code>pb_get_book_structure()</code></li> <li><code>pb_get_prev()</code></li> <li><code>pb_get_next()</code></li> <li><code>pb_get_first()</code></li> <li><code>pb_decode()</code></li> <li><code>pb_is_custom_theme()</code></li> <li><code>pb_get_custom_stylesheet_url()</code></li> <li><code>pb_get_chapter_number( $post_name )</code></li> <li><code>pb_thumbify( $thumb, $path )</code></li></ul> <h3 id="the-html"><a href="#the-html" class="header-anchor">#</a> The HTML</h3> <p>Top level elements (i.e. children nodes of):</p> <p><code>&lt;div id=&quot;X&quot;&gt;</code> where X can be:</p> <ul><li>cover-image</li> <li>half-title-page</li> <li>title-page</li> <li>copyright-page</li> <li>toc</li></ul> <p><code>&lt;div class=&quot;X&quot; id=&quot;post_name&quot;&gt;</code> where X can be:</p> <ul><li>front-matter</li> <li>part</li> <li>chapter</li> <li>back-matter</li></ul> <h3 id="typical-structure-for-front-matter-note-ugc-stands-for-user-generated-content"><a href="#typical-structure-for-front-matter-note-ugc-stands-for-user-generated-content" class="header-anchor">#</a> Typical structure for <em>front-matter</em> (note: &quot;ugc&quot; stands for &quot;User Generated Content&quot;)</h3> <div class="language- extra-class"><pre><code>&lt;div id=&quot;post_name&quot; class=&quot;front-matter subclass&quot;&gt;
  &lt;div class=&quot;front-matter-title-wrap&quot;&gt;
    &lt;h3 class=&quot;front-matter-number&quot;&gt;
      123             
    &lt;/h3&gt;
    &lt;h1 class=&quot;front-matter-title&quot;&gt;
      Title              
    &lt;/h1&gt;
  &lt;/div&gt;
  &lt;div class=&quot;ugc front-matter-ugc&quot;&gt;
    &lt;!-- Optional --&gt;
    &lt;h2 class=&quot;chapter-author&quot;&gt;          
    &lt;/h2&gt;
     &lt;h2 class=&quot;chapter-subtitle&quot;&gt;          
    &lt;/h2&gt;
    &lt;!-- WordPress, post_content --&gt;
  &lt;/div&gt;
  &lt;div class=&quot;endnotes&quot;&gt;
    &lt;!-- h3, ol --&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre></div><h3 id="typical-structure-for-part"><a href="#typical-structure-for-part" class="header-anchor">#</a> Typical structure for <em>part</em></h3> <div class="language- extra-class"><pre><code>&lt;div class=&quot;part&quot; id=&quot;post_name&quot;&gt;
  &lt;div class=&quot;part-title-wrap&quot;&gt;
    &lt;h3 class=&quot;part-number&quot;&gt;
      123
    &lt;/h3&gt;
    &lt;h1 class=&quot;part-title&quot;&gt;
      Title          
    &lt;/h1&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre></div><h3 id="typical-structure-for-chapter"><a href="#typical-structure-for-chapter" class="header-anchor">#</a> Typical structure for <em>chapter</em></h3> <div class="language- extra-class"><pre><code>&lt;div class=&quot;chapter&quot; id=&quot;post_name&quot;&gt;
  &lt;div class=&quot;chapter-title-wrap&quot;&gt;
    &lt;h3 class=&quot;chapter-number&quot;&gt;
      123
    &lt;/h3&gt;
    &lt;h2 class=&quot;chapter-title&quot;&gt;
      Title
    &lt;/h2&gt;
  &lt;/div&gt;
  &lt;div class=&quot;ugc chapter-ugc&quot;&gt;
    &lt;!-- Optional --&gt;
    &lt;h2 class=&quot;chapter-author&quot;&gt;
    &lt;/h2&gt;
    &lt;h2 class=&quot;chapter-subtitle&quot;&gt;
    &lt;/h2&gt;
    &lt;h6 class=&quot;short-title&quot;&gt;&lt;/h6&gt;
      &lt;/h2&gt;
          &lt;!-- WordPress, post_content --&gt;
        &lt;/div&gt;
      &lt;div class=&quot;endnotes&quot;&gt;
        &lt;!-- h3, ol--&gt;
      &lt;/div&gt;
      &lt;/div&gt;
</code></pre></div><h3 id="typical-structure-for-back-matter"><a href="#typical-structure-for-back-matter" class="header-anchor">#</a> Typical structure for <em>back-matter</em></h3> <div class="language- extra-class"><pre><code>&lt;div class=&quot;back-matter subclass&quot; id=&quot;post_name&quot;&gt;
  &lt;div class=&quot;back-matter-title-wrap&quot;&gt;
    &lt;h3 class=&quot;back-matter-number&quot;&gt;
      123
    &lt;/h3&gt;
    &lt;h1 class=&quot;back-matter-title&quot;&gt;
      Title
    &lt;/h1&gt;    
  &lt;/div&gt;
  &lt;div class=&quot;ugc back-matter-ugc&quot;&gt;
    &lt;!-- WordPress, post_content --&gt;    
  &lt;/div&gt;
  &lt;div class=&quot;endnotes&quot;&gt;
    &lt;!-- h3, ol --&gt;
  &lt;/div&gt;    
&lt;/div&gt;
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.05922f2d.js" defer></script><script src="/assets/js/2.6bc8cb11.js" defer></script><script src="/assets/js/7.1fe1ee85.js" defer></script>
  </body>
</html>
