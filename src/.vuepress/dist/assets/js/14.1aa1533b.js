(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{373:function(e,t,o){"use strict";o.r(t);var r=o(45),n=Object(r.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h2",{attrs:{id:"downloads"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#downloads"}},[e._v("#")]),e._v(" Downloads")]),e._v(" "),o("p",[e._v("Download the latest releases of "),o("a",{attrs:{href:"https://pressbooks.org/download/pressbooks/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Pressbooks"),o("OutboundLink")],1),e._v(", "),o("a",{attrs:{href:"https://pressbooks.org/download/mcluhan/",target:"_blank",rel:"noopener noreferrer"}},[e._v("McLuhan"),o("OutboundLink")],1),e._v(", and "),o("a",{attrs:{href:"https://pressbooks.org/download/aldine/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Aldine"),o("OutboundLink")],1),e._v(", as well as the latest releases of any other "),o("a",{attrs:{href:"https://github.com/search?q=topic:book-theme%20org:pressbooks&type=Repositories",target:"_blank",rel:"noopener noreferrer"}},[e._v("book themes"),o("OutboundLink")],1),e._v(" you wish to install.")]),e._v(" "),o("h2",{attrs:{id:"installation-manual"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#installation-manual"}},[e._v("#")]),e._v(" Installation (Manual)")]),e._v(" "),o("p",[e._v("IMPORTANT!")]),e._v(" "),o("ul",[o("li",[e._v("Do not install Pressbooks on an existing WordPress blog -- create a new WordPress install instead.")]),e._v(" "),o("li",[e._v("Pressbooks works with "),o("a",{attrs:{href:"https://secure.php.net/supported-versions.php",target:"_blank",rel:"noopener noreferrer"}},[e._v("PHP 7.3"),o("OutboundLink")],1),e._v(" and "),o("em",[e._v("(usually)")]),e._v(" the most recent version of WordPress right now. Lower versions are not supported.")])]),e._v(" "),o("h3",{attrs:{id:"part-1-wordpress"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#part-1-wordpress"}},[e._v("#")]),e._v(" Part 1: WordPress")]),e._v(" "),o("ol",[o("li",[o("p",[e._v("Install WordPress using the "),o("a",{attrs:{href:"http://codex.wordpress.org/Installing_WordPress",target:"_blank",rel:"noopener noreferrer"}},[e._v("Famous 5-Minute Install"),o("OutboundLink")],1),e._v(".")])]),e._v(" "),o("li",[o("p",[o("a",{attrs:{href:"http://codex.wordpress.org/Create_A_Network",target:"_blank",rel:"noopener noreferrer"}},[e._v("Create a Network"),o("OutboundLink")],1),e._v(" of WordPress sites, i.e.:")])]),e._v(" "),o("li",[o("p",[e._v("Edit the "),o("code",[e._v("wp-config.php")]),e._v(" file and add the following:")])])]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("define('WP_ALLOW_MULTISITE', true);\n")])])]),o("ol",{attrs:{start:"4"}},[o("li",[o("p",[e._v("Login to the WordPress admin area. Navigate to "),o("strong",[e._v("Tools")]),e._v(" → "),o("strong",[e._v("Network Setup")]),e._v(", click "),o("strong",[e._v("Install")]),e._v(".")])]),e._v(" "),o("li",[o("p",[e._v("Complete the steps printed on the screen (i.e. edit your "),o("code",[e._v("wp-config.php")]),e._v(" and "),o("code",[e._v(".htaccess")]),e._v(" files with the information provided).")])])]),e._v(" "),o("h3",{attrs:{id:"part-2-pressbooks"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#part-2-pressbooks"}},[e._v("#")]),e._v(" Part 2: Pressbooks")]),e._v(" "),o("ol",[o("li",[o("p",[e._v("Copy the Pressbooks plugin folder to: "),o("code",[e._v("/path/to/your/site/wp-content/plugins/*")]),e._v(".")])]),e._v(" "),o("li",[o("p",[e._v("Copy Pressbooks' autoloader file from "),o("code",[e._v("/path/to/your/site/wp-content/plugins/pressbooks/hm-autoloader.php")]),e._v(" to "),o("code",[e._v("/path/to/your/site/wp-content/mu-plugins/hm-autoloader.php")]),e._v(". You may need to create the "),o("code",[e._v("wp-content/mu-plugins/")]),e._v(" directory if it doesn't yet exist.")])]),e._v(" "),o("li",[o("p",[e._v("Copy the Pressbooks Book, Pressbooks Aldine and other theme folders to: "),o("code",[e._v("/path/to/your/site/wp-content/themes/*")]),e._v(" ("),o("strong",[e._v("NOTE")]),e._v(": theme folders must not have version numbers on the end. "),o("strong",[e._v("GOOD")]),e._v(": "),o("code",[e._v("pressbooks-aldine")]),e._v(". "),o("strong",[e._v("BAD")]),e._v(": "),o("code",[e._v("pressbooks-aldine-3.1.0")]),e._v(". Make sure that you rename the folders appropriately.)")])]),e._v(" "),o("li",[o("p",[e._v("Log out, log in, navigate to: "),o("strong",[e._v("My Sites")]),e._v(" → "),o("strong",[e._v("Network Admin")]),e._v(" → "),o("strong",[e._v("Dashboard")]),e._v(".")])]),e._v(" "),o("li",[o("p",[e._v("Navigate to "),o("strong",[e._v("Plugins")]),e._v(" → "),o("strong",[e._v("Installed Plugins")]),e._v(".")])]),e._v(" "),o("li",[o("p",[e._v('Network Enable "Pressbooks".')])]),e._v(" "),o("li",[o("p",[e._v("Navigate to "),o("strong",[e._v("Themes")]),e._v(" → "),o("strong",[e._v("Installed Themes")]),e._v(".")])]),e._v(" "),o("li",[o("p",[e._v('Network Enable "McLuhan", "Aldine", and any other Pressbooks theme you want to use.')])]),e._v(" "),o("li",[o("p",[e._v("Navigate to "),o("strong",[e._v("Settings")]),e._v(" → "),o("strong",[e._v("Network Settings")]),e._v(".")])]),e._v(" "),o("li",[o("p",[e._v("Pick the most appropriate Registration setting:")]),e._v(" "),o("ul",[o("li",[e._v("User accounts may be registered. (Do not use this setting, since it will not allow users to create new books!)")]),e._v(" "),o("li",[e._v("Logged in users may register new sites. (If you are a publisher using Pressbooks as a production tool, this is the best setting: it allows network administrators to add new users, who can then create books/sites. However, registration is not available to the public.)")]),e._v(" "),o("li",[e._v("Both sites and user accounts can be registered. (Use this setting if you intend on offering a publishing-platform open to the public, such as "),o("a",{attrs:{href:"https://pressbooks.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("Pressbooks.com"),o("OutboundLink")],1),e._v(")")])])]),e._v(" "),o("li",[o("p",[e._v("Navigate to "),o("strong",[e._v("My Catalog")]),e._v(" → "),o("strong",[e._v("Your Site")]),e._v(" → "),o("strong",[e._v("Dashboard")])])]),e._v(" "),o("li",[o("p",[e._v("Navigate to "),o("strong",[e._v("Appearance")]),e._v(' and activate "Aldine".')])]),e._v(" "),o("li",[o("p",[e._v("Navigate to "),o("strong",[e._v("My Catalog")]),e._v(" → "),o("strong",[e._v("Add A New Book")]),e._v(" (this will be your first book).")])]),e._v(" "),o("li",[o("p",[e._v("Navigate to "),o("strong",[e._v("My Catalog")]),e._v(" → "),o("strong",[e._v("Your First Book")]),e._v(" → "),o("strong",[e._v("Dashboard")]),e._v(".")])]),e._v(" "),o("li",[o("p",[e._v("Navigate to "),o("strong",[e._v("Book Info")]),e._v(". Make sure to fill out Title, Author and Publication Date.")])]),e._v(" "),o("li",[o("p",[e._v("Navigate to "),o("strong",[e._v("Text")]),e._v(" → "),o("strong",[e._v("Organize")]),e._v(". Make sure some content is selected for export.")])])]),e._v(" "),o("h3",{attrs:{id:"part-3-pressbooks-dependencies"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#part-3-pressbooks-dependencies"}},[e._v("#")]),e._v(" Part 3: Pressbooks Dependencies")]),e._v(" "),o("p",[e._v("Pressbooks requires some third-party libraries to be installed on your server to enable export capabilities.")]),e._v(" "),o("ul",[o("li",[e._v("For PDF export, you have three options:\n"),o("ol",[o("li",[e._v("Configure "),o("a",{attrs:{href:"https://docraptor.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("DocRaptor"),o("OutboundLink")],1),e._v(", which is a software as a service version of "),o("a",{attrs:{href:"https://www.princexml.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("PrinceXML"),o("OutboundLink")],1),e._v(". To do this, you just need to add your DocRaptor API key to "),o("code",[e._v("wp-config.php")]),e._v(": "),o("code",[e._v("define( 'DOCRAPTOR_API_KEY', 'YOUR_API_KEY_HERE' );")])]),e._v(" "),o("li",[e._v("Install "),o("a",{attrs:{href:"https://www.princexml.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("PrinceXML"),o("OutboundLink")],1),e._v(" 12 on your server (note: this is not free software although you can use it free of charge for non-commercial purposes, see their license).")]),e._v(" "),o("li",[e._v("Install the "),o("a",{attrs:{href:"https://github.com/BCcampus/pressbooks-mpdf",target:"_blank",rel:"noopener noreferrer"}},[e._v("mPDF for Pressbooks"),o("OutboundLink")],1),e._v(" plugin to use the open source mPDF library. (Note: As of May 2019 this project is "),o("a",{attrs:{href:"https://github.com/pressbooks/docs/issues/32#issuecomment-503255424",target:"_blank",rel:"noopener noreferrer"}},[e._v("unmaintained"),o("OutboundLink")],1),e._v(" )")])])]),e._v(" "),o("li",[e._v("For MOBI export install "),o("a",{attrs:{href:"http://www.amazon.com/gp/feature.html?docId=1000765211",target:"_blank",rel:"noopener noreferrer"}},[e._v("KindleGen"),o("OutboundLink")],1),e._v(" 2.9")]),e._v(" "),o("li",[e._v("For EPUB validation install "),o("a",{attrs:{href:"https://github.com/w3c/epubcheck",target:"_blank",rel:"noopener noreferrer"}},[e._v("EpubCheck"),o("OutboundLink")],1),e._v(" 4.1.1")]),e._v(" "),o("li",[e._v("For XML validation install "),o("a",{attrs:{href:"http://xmlsoft.org/xmllint.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("xmllint"),o("OutboundLink")],1),e._v(" 20903")]),e._v(" "),o("li",[e._v("For ODT export install "),o("a",{attrs:{href:"https://sourceforge.net/projects/saxon/files/Saxon-HE/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Saxon-HE"),o("OutboundLink")],1),e._v(" 9.7.0-10")]),e._v(" "),o("li",[e._v("For the Cover Generator feature, install:\n"),o("ul",[o("li",[e._v("Ghostscript 9.18: "),o("code",[e._v("sudo apt-get install ghostscript")])]),e._v(" "),o("li",[e._v("ImageMagick 6.8.9: "),o("code",[e._v("sudo apt-get install imagemagick")])]),e._v(" "),o("li",[e._v("PdfToPpm and PdfInfo 0.41.0: "),o("code",[e._v("sudo apt-get install poppler-utils")])])])]),e._v(" "),o("li",[e._v("For MathJax export install (and host!) master branch of "),o("a",{attrs:{href:"https://github.com/pressbooks/pb-mathjax",target:"_blank",rel:"noopener noreferrer"}},[e._v("pb-mathjax"),o("OutboundLink")],1)]),e._v(" "),o("li",[e._v("Certain Linux installations do not ship with the "),o("code",[e._v("php-xsl")]),e._v(" library enabled by default. If you attempt to export an ePub and get a either a white screen with minimal text, or a \"Fatal error: Class 'XSLTProcessor' not found\" error, you may need to run a command like "),o("code",[e._v("sudo apt-get install php-xsl")]),e._v(".")]),e._v(" "),o("li",[e._v("Certain Linux installations do not ship with the "),o("code",[e._v("php-exif")]),e._v(" library enabled by default. If you attempt to export an ePub and get a either a white screen with minimal text, or an error, you may need to install this extension (e.g. "),o("code",[e._v("sudo apt-get install php-exif")]),e._v(" )")]),e._v(" "),o("li",[e._v("Linux installations do not ship with Microsoft fonts, which can be useful when producing PDF exports. See https://itsfoss.com/install-microsoft-fonts-ubuntu/ or similar for instructions on installing.")])]),e._v(" "),o("p",[e._v("Unlisted versions are not supported. Upgrade/downgrade accordingly.")]),e._v(" "),o("p",[e._v("Once installed, define the following "),o("code",[e._v("wp-config.php")]),e._v(" variables (make sure to update the paths to correspond to your specific installation). The defaults are:")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[e._v("define( 'PB_PRINCE_COMMAND', '/usr/bin/prince' ); // Only required if you are using Prince on your server\ndefine( 'PB_KINDLEGEN_COMMAND', '/opt/kindlegen/kindlegen' );\ndefine( 'PB_EPUBCHECK_COMMAND', '/usr/bin/java -jar /opt/epubcheck/epubcheck.jar' );\ndefine( 'PB_XMLLINT_COMMAND', '/usr/bin/xmllint' );\ndefine( 'PB_SAXON_COMMAND', '/usr/bin/java -jar /opt/saxon-he/saxon-he.jar' );\ndefine( 'PB_MATHJAX_URL', 'http://localhost:3000/' );\n")])])]),o("p",[e._v("Example config files for a dev site hosted at "),o("code",[e._v("http://localhost/~example/textopress/")])]),e._v(" "),o("h3",{attrs:{id:"wp-config-php-file-snippet"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#wp-config-php-file-snippet"}},[e._v("#")]),e._v(" wp-config.php file [snippet]:")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[e._v("/**\n * For developers: WordPress debugging mode.\n *\n * Change this to true to enable the display of notices during development.\n * It is strongly recommended that plugin and theme developers use WP_DEBUG\n * in their development environments.\n */\ndefine('WP_DEBUG', true);\ndefine('WP_DEBUG_LOG', true);\n\n/**\n * Multi-site support, Part 1\n */\ndefine('WP_ALLOW_MULTISITE', true);\n\n/**\n * Multi-site support, Part 2\n */\ndefine('MULTISITE', true);\ndefine('SUBDOMAIN_INSTALL', false);\n$base = '/~example/textopress/';\ndefine('DOMAIN_CURRENT_SITE', 'localhost');\ndefine('PATH_CURRENT_SITE', '/~example/textopress/');\ndefine('SITE_ID_CURRENT_SITE', 1);\ndefine('BLOG_ID_CURRENT_SITE', 1);\n\n/**\n * Pressbooks\n */\ndefine( 'PB_PRINCE_COMMAND', '/usr/bin/prince' );\ndefine( 'PB_KINDLEGEN_COMMAND', '/home/example/bin/kindlegen' );\ndefine( 'PB_EPUBCHECK_COMMAND', '/usr/bin/java -jar /home/example/bin/epubcheck/epubcheck.jar' );\ndefine( 'PB_XMLLINT_COMMAND', '/usr/bin/xmllint' );\ndefine( 'PB_SAXON_COMMAND', '/usr/bin/java -jar home/example/bin/saxon-he/saxon-he.jar' );\ndefine( 'PB_MATHJAX_URL', 'http://localhost:3000/' );\n\n/**\n * Optional definitions\n */\n// define( 'AUTOSAVE_INTERVAL', 60 ); // Autosave every N seconds\n// define( 'WP_POST_REVISIONS', 5 ); // Limit post revisions: int or false\n// define( 'EMPTY_TRASH_DAYS', 1 ); // Purge trash interval. PB default is after 30 days.\n\n/* That's all, stop editing! Happy blogging. */\n")])])]),o("h3",{attrs:{id:"htaccess-file"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#htaccess-file"}},[e._v("#")]),e._v(" .htaccess file:")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",[o("code",[e._v("RewriteEngine On\nRewriteBase /~example/textopress/\nRewriteRule ^index.php$ - [L]\n\n# add a trailing slash to /wp-admin\nRewriteRule ^([_0-9a-zA-Z-]+/)?wp-admin$ $1wp-admin/ [R=301,L]\n\nRewriteCond %{REQUEST_FILENAME} -f [OR]\nRewriteCond %{REQUEST_FILENAME} -d\nRewriteRule ^ - [L]\nRewriteRule  ^[_0-9a-zA-Z-]+/(wp-(content|admin|includes).*) $1 [L]\nRewriteRule  ^[_0-9a-zA-Z-]+/(.*.php)$ $1 [L]\nRewriteRule . index.php [L]\n")])])]),o("blockquote",[o("p",[e._v("Tip: Need a wp-cli deploy? Start here: https://github.com/pressbooks/snippets/blob/master/deploying/wp-cli-example.md")])])])}),[],!1,null,null,null);t.default=n.exports}}]);