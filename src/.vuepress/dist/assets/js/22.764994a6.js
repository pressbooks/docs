(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{377:function(e,t,s){"use strict";s.r(t);var o=s(45),n=Object(o.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h2",{attrs:{id:"_1-getting-started"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-getting-started"}},[e._v("#")]),e._v(" 1. Getting Started")]),e._v(" "),s("p",[e._v("We recommend that you start by installing "),s("a",{attrs:{href:"http://wp-cli.org/#installing",target:"_blank",rel:"noopener noreferrer"}},[e._v("WP-CLI"),s("OutboundLink")],1),e._v(", which will let you use Pressbooks built-in "),s("a",{attrs:{href:"https://github.com/pressbooks/pb-cli/#installing",target:"_blank",rel:"noopener noreferrer"}},[e._v("pb-cli"),s("OutboundLink")],1),e._v(" utility to scaffold a new Pressbooks book theme in your development environment with the following command:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[e._v("wp scaffold book-theme <slug>\n")])])]),s("p",[e._v("For further options, "),s("a",{attrs:{href:"https://github.com/pressbooks/pb-cli/#using",target:"_blank",rel:"noopener noreferrer"}},[e._v("read the docs"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("p",[e._v("The resulting theme will have the following structure and contents:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[e._v("├── assets\n│   ├── styles\n│   │   ├── components\n│   │   │   ├── _accessibility.scss\n│   │   │   ├── _colors.scss\n│   │   │   ├── _elements.scss\n│   │   │   ├── _media.scss\n│   │   │   ├── _specials.scss\n│   │   │   ├── _structure.scss\n│   │   │   ├── _titles.scss\n│   │   │   ├── _toc.scss\n│   │   ├── epub\n│   │   │   ├── _fonts.scss\n│   │   │   ├── style.scss\n│   │   ├── prince\n│   │   │   ├── _fonts.scss\n│   │   │   ├── style.scss\n│   │   ├── web\n│   │   │   ├── _fonts.scss\n│   │   │   ├── style.scss\n├── .editorconfig\n├── .gitignore\n├── .scss-lint.yml\n├── functions.php\n├── style.css\n")])])]),s("p",[e._v("Note that "),s("a",{attrs:{href:"https://github.com/pressbooks/pressbooks-demo/blob/15875fb8c7d4ea8a026190c60e48ae4b4971cef3/style.css",target:"_blank",rel:"noopener noreferrer"}},[s("code",[e._v("style.css")]),s("OutboundLink")],1),e._v(" is not used except to provide Pressbooks with "),s("a",{attrs:{href:"https://codex.wordpress.org/File_Header#Theme_File_Header_Example",target:"_blank",rel:"noopener noreferrer"}},[e._v("theme file header"),s("OutboundLink")],1),e._v(" information. Your web theme stylesheet is compiled when your theme is activated or theme options that affect it are changed. For easier development, you can add the following line to "),s("code",[e._v("wp-config.php")]),e._v(":")]),e._v(" "),s("p",[s("code",[e._v("define('WP_ENV', 'development');")])]),e._v(" "),s("p",[e._v("This will turn on the development compiler introduced in Pressbooks 3.9.0, which triggers a recompile of your web theme stylesheet if the source files have been modified since it was last compiled when you visit any page in your webbook ("),s("a",{attrs:{href:"https://github.com/pressbooks/pressbooks/blob/v3.9.0/themes-book/pressbooks-book/functions.php#L97-L143",target:"_blank",rel:"noopener noreferrer"}},[e._v("see here"),s("OutboundLink")],1),e._v(").")]),e._v(" "),s("h2",{attrs:{id:"_2-overriding-defaults"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-overriding-defaults"}},[e._v("#")]),e._v(" 2. Overriding Defaults")]),e._v(" "),s("p",[e._v("If you activate the theme you have just created, you will be able to export your book in all formats thanks to our sensible defaults. But now comes the fun part. Each file in "),s("code",[e._v("assets/styles/components")]),e._v(" is set up to allow you to override the default values of all theme variables. Components are as follows:")]),e._v(" "),s("h3",{attrs:{id:"accessiblity-scss"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#accessiblity-scss"}},[e._v("#")]),e._v(" _accessiblity.scss")]),e._v(" "),s("p",[e._v("Contains rules for accessibility.")]),e._v(" "),s("h3",{attrs:{id:"colors-scss"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#colors-scss"}},[e._v("#")]),e._v(" _colors.scss")]),e._v(" "),s("p",[e._v("Contains color definitions which can be assigned elsewhere.")]),e._v(" "),s("h3",{attrs:{id:"elements-scss"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#elements-scss"}},[e._v("#")]),e._v(" _elements.scss")]),e._v(" "),s("p",[e._v("Contains rules for standard elements (headings, paragraphs, blockquotes et cetera).")]),e._v(" "),s("h3",{attrs:{id:"media-scss"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#media-scss"}},[e._v("#")]),e._v(" _media.scss")]),e._v(" "),s("p",[e._v("Contains rules for images, embedded audio and embedded video.")]),e._v(" "),s("h3",{attrs:{id:"specials-scss"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#specials-scss"}},[e._v("#")]),e._v(" _specials.scss")]),e._v(" "),s("p",[e._v("Contains rules for custom elements (columns, footnotes, pullquotes, dropcaps, et cetera).")]),e._v(" "),s("h3",{attrs:{id:"structure-scss"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#structure-scss"}},[e._v("#")]),e._v(" _structure.scss")]),e._v(" "),s("p",[e._v("Contains rules for document and page and structure (only included in "),s("a",{attrs:{href:"https://pressbooks.com/prince/",target:"_blank",rel:"noopener noreferrer"}},[e._v("PrinceXML"),s("OutboundLink")],1),e._v(" PDF — page dimensions, margins, recto-verso, running content et cetera).")]),e._v(" "),s("h3",{attrs:{id:"titles-scss"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#titles-scss"}},[e._v("#")]),e._v(" _titles.scss")]),e._v(" "),s("p",[e._v("Contains rules for book, front matter, part, chapter and back matter titles.")]),e._v(" "),s("h3",{attrs:{id:"toc-scss"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#toc-scss"}},[e._v("#")]),e._v(" _toc.scss")]),e._v(" "),s("p",[e._v("Contains rules for the book's table of contents.")]),e._v(" "),s("p",[e._v("Let's take a look at "),s("a",{attrs:{href:"https://github.com/pressbooks/pressbooks-demo/blob/15875fb8c7d4ea8a026190c60e48ae4b4971cef3/assets/styles/components/_elements.scss",target:"_blank",rel:"noopener noreferrer"}},[s("code",[e._v("assets/styles/components/_elements.scss")]),s("OutboundLink")],1),e._v(":")]),e._v(" "),s("pre",[e._v("// Elements\n\n// Override variables above this line, using the !default flag to allow further overrides.\n@import 'variables/elements';\n\n// Add custom SCSS below these imports and includes.\n@import 'components/elements/links';\n@import 'components/elements/blockquotes';\n@import 'components/elements/body';\n@import 'components/elements/headings';\n@import 'components/elements/lists';\n@import 'components/elements/miscellaneous';\n@import 'components/elements/paragraphs';\n@import 'components/elements/tables';")]),e._v(" "),s("p",[e._v("As you can see, this file is importing a variables file and a number of individual component files (all of which can be found within the Pressbooks plugin in the "),s("a",{attrs:{href:"https://github.com/pressbooks/pressbooks/tree/master/assets/book/styles",target:"_blank",rel:"noopener noreferrer"}},[s("code",[e._v("assets/book/styles")]),s("OutboundLink")],1),e._v(" directory). Let's examine the rules found in "),s("a",{attrs:{href:"https://github.com/pressbooks/pressbooks/blob/master/assets/book/styles/components/elements/_blockquotes.scss",target:"_blank",rel:"noopener noreferrer"}},[s("code",[e._v("components/elements/_blockquotes.scss")]),s("OutboundLink")],1),e._v(":")]),e._v(" "),s("pre",[e._v(".blockquote,\nblockquote {\nmargin-top: $blockquote-margin-top;\nmargin-right: $blockquote-margin-right;\nmargin-bottom: $blockquote-margin-bottom;\nmargin-left: $blockquote-margin-left;\nfont-family: $blockquote-font-family;\nfont-size: $blockquote-font-size;\nfont-style: $blockquote-font-style;\nfont-weight: $blockquote-font-weight;\nline-height: $blockquote-line-height;\ntext-align: $blockquote-align;\n}")]),e._v(" "),s("p",[e._v("The values for these SCSS variables are found in "),s("a",{attrs:{href:"https://github.com/pressbooks/pressbooks/blob/master/assets/book/styles/variables/_elements.scss",target:"_blank",rel:"noopener noreferrer"}},[s("code",[e._v("variables/_elements.scss")]),s("OutboundLink")],1),e._v(" (all directories and root-level SCSS partials in "),s("code",[e._v("assets/book/styles/components")]),e._v(" have a corresponding variables file):")]),e._v(" "),s("p",[s("code",[e._v("$blockquote-font-family: $font-1 !default; $blockquote-font-size: .9em !default; $blockquote-font-style: normal !default; $blockquote-font-weight: normal !default; $blockquote-line-height: 1.2em !default; $blockquote-margin-top: 1em !default; $blockquote-margin-right: 1em !default; $blockquote-margin-bottom: 1em !default; $blockquote-margin-left: 1em !default; $blockquote-align: justify !default;")])]),e._v(" "),s("p",[e._v("You will notice that all these values are set with the SCSS "),s("a",{attrs:{href:"https://robots.thoughtbot.com/sass-default",target:"_blank",rel:"noopener noreferrer"}},[s("code",[e._v("!default")]),e._v(" flag"),s("OutboundLink")],1),e._v(". Essentially, the "),s("code",[e._v("!default")]),e._v(" flag tells the SCSS compiler to use this value "),s("strong",[e._v("unless")]),e._v(" another value has already been assigned to the variable. Going back to your new theme's "),s("a",{attrs:{href:"https://github.com/pressbooks/pressbooks-demo/blob/15875fb8c7d4ea8a026190c60e48ae4b4971cef3/assets/styles/components/_elements.scss",target:"_blank",rel:"noopener noreferrer"}},[s("code",[e._v("assets/styles/components/_elements.scss")]),s("OutboundLink")],1),e._v(", file, you could change it as follows:")]),e._v(" "),s("pre",[e._v("// Elements\n\n$blockquote-font-style: italic !default;\n\n// Override variables above this line, using the !default flag to allow further overrides.\n@import 'variables/elements';\n\n// Add custom SCSS below these imports and includes.\n@import 'components/elements/links';\n@import 'components/elements/blockquotes';\n@import 'components/elements/body';\n@import 'components/elements/headings';\n@import 'components/elements/lists';\n@import 'components/elements/miscellaneous';\n@import 'components/elements/paragraphs';\n@import 'components/elements/tables';")]),e._v(" "),s("p",[e._v("When Pressbooks compiles your theme's SCSS, the rule for blockquotes will now include the "),s("code",[e._v("font-style")]),e._v(" value from your theme instead of the global default, so the output will look like this:")]),e._v(" "),s("p",[s("code",[e._v(".blockquote, blockquote { margin-top: 1em; margin-right: 1em; margin-bottom: 1em; margin-left: 1em; font-family: serif; font-size: 0.9em; font-style: italic; font-weight: normal; line-height: 1.2em; text-align: justify; }")])]),e._v(" "),s("p",[e._v("The reason you should use the "),s("code",[e._v("!default")]),e._v(" flag on your variable definitions is so that your theme's values can be further overridden by user options. Most variables cannot currently be overridden in this way (because the necessary theme options don't exist yet), but we recommend always using the default flag so that future enhancements to user theme options can be developed with as much flexibility as possible.")]),e._v(" "),s("h2",{attrs:{id:"_3-adding-custom-rules"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-adding-custom-rules"}},[e._v("#")]),e._v(" 3. Adding Custom Rules")]),e._v(" "),s("p",[e._v("Now that you've overridden a variable, try adding your own custom rule. Perhaps your book needs a special type of blockquote that is centered on the page. You can add it by inserting the following rule below the "),s("code",[e._v("@import")]),e._v(" rules in "),s("a",{attrs:{href:"https://github.com/pressbooks/pressbooks-demo/blob/550648bf3c6ea947a5670ce083b8078535d39fb5/assets/styles/components/_elements.scss",target:"_blank",rel:"noopener noreferrer"}},[s("code",[e._v("assets/styles/components/_elements.scss")]),s("OutboundLink")],1),e._v(":")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[e._v("blockquote.centered,\n.blockquote.centered {\nmargin-right: auto;\nmargin-left: auto;\n}\n")])])]),s("p",[e._v("Now our full "),s("a",{attrs:{href:"https://github.com/pressbooks/pressbooks-demo/blob/550648bf3c6ea947a5670ce083b8078535d39fb5/assets/styles/components/_elements.scss",target:"_blank",rel:"noopener noreferrer"}},[s("code",[e._v("assets/styles/components/_elements.scss")]),s("OutboundLink")],1),e._v(" file looks like this:")]),e._v(" "),s("pre",[e._v("// Elements\n\n$blockquote-font-style: italic !default;\n// Override variables above this line, using the !default flag to allow further overrides.\n @import 'variables/elements';\n\n// Add custom SCSS below these imports and includes.\n @import 'components/elements/links';\n @import 'components/elements/blockquotes';\n @import 'components/elements/body';\n @import 'components/elements/headings';\n @import 'components/elements/lists';\n @import 'components/elements/miscellaneous';\n @import 'components/elements/paragraphs';\n @import 'components/elements/tables';\n\nblockquote.centered,\n .blockquote.centered {\n margin-right: auto;\n margin-left: auto;\n }\n\n")]),e._v(" "),s("p",[e._v("And when you export your book, Pressbooks will compile your new rule after the default rule for blockquotes, so "),s("code",[e._v("blockquote.centered")]),e._v(" will inherit all the properties of the standard blockquote but will override the left and right margin properties.")]),e._v(" "),s("h2",{attrs:{id:"_4-different-formats-different-rules"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-different-formats-different-rules"}},[e._v("#")]),e._v(" 4. Different Formats, Different Rules")]),e._v(" "),s("p",[e._v("Sometimes you need to set a variable differently depending on which format you are using. Perhaps you want to left-align your blockquotes for EPUB and web, but you want to justify them for PDF. This is easy to accomplish using an SCSS if-statement with the "),s("code",[e._v("$type")]),e._v(" variable. Add another variable override to the top of "),s("a",{attrs:{href:"https://github.com/pressbooks/pressbooks-demo/blob/4eb01592c38830127f8392ecfaf4afb7de491260/assets/styles/components/_elements.scss",target:"_blank",rel:"noopener noreferrer"}},[s("code",[e._v("assets/styles/components/_elements.scss")]),s("OutboundLink")],1),e._v(" as follows:")]),e._v(" "),s("p",[s("code",[e._v("@if $type == 'epub' { $blockquote-align: left !default; } @else if $type == 'prince' { $blockquote-align: justify !default; } @else if $type == 'web' { $blockquote-align: left !default; }")])]),e._v(" "),s("p",[e._v("All the component files you are working on are imported into the different outputs' "),s("code",[e._v("style.scss")]),e._v(" files. For example, your book theme's stylesheet for Prince PDF, "),s("a",{attrs:{href:"https://github.com/pressbooks/pressbooks-demo/blob/4eb01592c38830127f8392ecfaf4afb7de491260/assets/styles/prince/style.scss",target:"_blank",rel:"noopener noreferrer"}},[s("code",[e._v("assets/styles/prince/style.scss")]),s("OutboundLink")],1),e._v(", looks like this:")]),e._v(" "),s("pre",[e._v("$type: 'prince';\n\n@import 'fonts';\n @import '../components/colors';\n @import '../components/elements';\n @import '../components/specials';\n @import '../components/media';\n @import '../components/titles';\n @import '../components/structure';\n @import '../components/toc';\n\n")]),e._v(" "),s("p",[e._v("The if-statement you just wrote will be evaluated based on each stylesheet's "),s("code",[e._v("$type")]),e._v(" variable, so the "),s("code",[e._v("$blockquote-align")]),e._v(" property variable will be set to "),s("code",[e._v("left")]),e._v(" for EPUB and web and "),s("code",[e._v("justify")]),e._v(" for Prince PDF.")]),e._v(" "),s("p",[e._v("You should never modify the "),s("code",[e._v("assets/styles/<format>/style.scss")]),e._v(" file directly; all your variables and rules should go in the component files.")]),e._v(" "),s("h2",{attrs:{id:"_5-fonts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-fonts"}},[e._v("#")]),e._v(" 5. Fonts")]),e._v(" "),s("p",[e._v("Font stack definitions can be set for EPUB, Prince, and Web in their respective directories in the "),s("code",[e._v("assets/styles/<format>")]),e._v(" path.")]),e._v(" "),s("pre",[e._v("@import '_font-stack-prince'; \n\n$serif-prince: serif !default;\n$sans-serif-prince: sans-serif !default;\n\n$font-1: \"Tinos\", Georgia, $serif-prince;\n$font-2: 'Lato', Helvetica, Arial, $sans-serif-prince;\n\n@import 'LatoFont', 'TinosFont';\n")]),e._v(" "),s("p",[e._v("Most themes have at least two font stacks, but may have more. "),s("code",[e._v("$font-1")]),e._v(" must be the body font, and "),s("code",[e._v("$font-2")]),e._v(" must be the header font. The "),s("code",[e._v("@import")]),e._v(" rule loads a SCSS "),s("code",[e._v("_font-stack-{TYPE}")]),e._v(" file which is dynamically generated based on the "),s("a",{attrs:{href:"https://guide.pressbooks.com/chapter/languages/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Language and Script Support"),s("OutboundLink")],1),e._v(" settings in the Global tab of Theme Options. The "),s("code",[e._v("_font-stack-{TYPE}")]),e._v(" is built from partials found in our default book theme McLuhan. These files, in combination with the "),s("code",[e._v("$serif-epub, $sans-serif-epub, $serif-prince, $sans-serif-prince, $serif-web")]),e._v(" and "),s("code",[e._v("$sans-serif-web")]),e._v(" variables, allow us to dynamically add support for non-Latin character sets.")]),e._v(" "),s("p",[e._v("You can insert custom fonts for your theme into the font stacks shown below. Always end the stack with "),s("code",[e._v("$serif-epub")]),e._v(" or "),s("code",[e._v("$sans-serif-epub")]),e._v(", as appropriate—this allows custom language support to be added dynamically.")]),e._v(" "),s("pre",[e._v("$font-1: \"Tinos\", Georgia, $serif-prince;\n$font-2: 'Lato', Helvetica, Arial, $sans-serif-prince;\n")]),e._v(" "),s("p",[e._v("Add import rules for any fonts you want to reference. Available font partials are located in McLuhan at the path "),s("code",[e._v("assets/book/typography/styles")]),e._v(" and follow the naming pattern: "),s("code",[e._v("_FontNameInCamelCaseFont.scss")]),e._v(". For example, to import "),s("code",[e._v("Alegreya Sans")]),e._v(", use this code:")]),e._v(" "),s("pre",[e._v("@import 'AlegreyaSansFont';\n")]),e._v(" "),s("p",[e._v("You may also include a typeface from a directory like Google Fonts in your web book. Here is an example of how to import in your web fonts file:")]),e._v(" "),s("pre",[e._v('@import url("https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Crimson+Text:400,400italic,700,700italic");\n')])])}),[],!1,null,null,null);t.default=n.exports}}]);